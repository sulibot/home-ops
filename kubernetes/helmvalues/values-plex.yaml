# General app metadata
name: plex               # Application name (used for naming resources and host subdomain)
namespace: media            # Namespace for the application, PVCs, and services

# Docker container settings
image:
  repository: plexinc/pms-docker
  tag: latest               # Optional: Specify a tag for the image
  digest: ""                # Optional: Specify a digest for the image (e.g., sha256:...)

# Timezone
timezone: "America/Los_Angeles"  # Default timezone for the application

env:
#  - name: PUID
#    value: "911"
  - name: PGID
#    value: "911"
  # This claim is optional, and is only used for the first startup of PMS
  # The claim is obtained from https://www.plex.tv/claim/ is is only valid for a few minutes
  #- name: PLEX_CLAIM
  #  value: "claim"
  - name: HOSTNAME
    value: "plex"
  - name: PLEX_UPDATE_CHANNEL
    value: "plexpass"
  #- name: ALLOWED_NETWORKS
  #  value: "0.0.0.0/0"
  #- name: 
  #  value:
  #- name: 
  #  value: 

#   PLEX_UID: "uid of plex user"
#   PLEX_GID: "group id of plex user"
# a list of CIDRs that can use the server without authentication
# this is only used for the first startup of PMS
#   

# Replicas
replicaCount: 1

# Ports
ports:
  servicePort: 80           # Port exposed by the service
  targetPort: 32400

# Network configuration
gateway:
  name: gateway-internal    # Optional: Defaults to "gateway-internal"
  namespace: network        # Namespace where the Gateway and HTTPRoute reside
  domain: sulibot.com       # Default domain for hostnames

# Labels and Annotations
labels:
  global:
  service:
  deployment:
  pod:
annotations:
  global:
  service:
  deployment:
  pod:

# Deployment resources
resources:
  enabled: false            # Resource limits and requests are disabled by default
  requests:
    memory: "256Mi"         # Minimum memory requested
    cpu: "250m"             # Minimum CPU requested
  limits:
    memory: "512Mi"         # Maximum memory allowed
    cpu: "500m"             # Maximum CPU allowed

# Security Context
securityContext:
  enabled: false            # Must be explicitly enabled
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 65534
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false

# Config PVC configuration
config:
  enabled: true              # PVC is enabled by default
  mountPath: /config         # Default mount path for config PVC

# Shared PVC configuration
data:
  enabled: true              # Shared PVC is enabled by default
  mountPath: /data          # The path where the shared PVC will be mounted

initContainer:
  enabled: false                     # Enable or disable the init container
  name: setup-container              # Name of the init container
  image: busybox                     # Docker image to use
  command:                           # Command to run in the init container
    - /bin/sh
    - -c
  args:                              # Arguments for the command
    - "echo Setting up environment"
  env:                               # Environment variables for the init container
    - name: SAMPLE_ENV
      value: "init-container-value"
  volumeMounts:                      # Volume mounts for the init container
    - name: config
      mountPath: /config
    - name: shared-media
      mountPath: /data