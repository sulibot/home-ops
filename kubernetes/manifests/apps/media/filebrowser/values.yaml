# General application settings
name: files                  # Application name (used for naming resources and host subdomain)
namespace: media                # Namespace for the application, PVCs, and services

# Docker container settings
image:
  repository: filebrowser/filebrowser
  tag: s6                   # Optional: Specify a tag for the image
  digest: ""                    # Optional: Specify a digest for the image (e.g., sha256:...)

# Timezone
timezone: "America/Los_Angeles"  # Default timezone for the application



# Replica settings
replicaCount: 1


# Network configuration
gateway:
  enabled: true 
  name: gateway-internal        # Defaults to "gateway-internal"
  namespace: network            # Namespace for the Gateway and HTTPRoute
  domain: sulibot.com           # Default domain for hostnames

  # Environment variables
env:
# Uncomment and customize environment variables as needed
  - name: FB_CONFIG
    value: "/settings.json"
#  - name: PUID
#    value: "911"
#  - name: PGID
#    value: "911"
# Labels and Annotations
labels:
  global: {}                    # Global labels for all resources
  service: {}                   # Labels specific to the service
  deployment: {}                # Labels specific to the deployment
  pod: {}                       # Labels specific to the pod

annotations: {}  
  

# Port configuration
ports:
  - name: web-ui
    servicePort: 80               # Port exposed by the service
    targetPort: 8080              # Port used by the container


  # Annotations specific to the pod
# DNS configuration
dnsPolicy: ClusterFirst          # Default DNS policy
dnsConfig:
  enabled: true                # Enable or disable custom DNS settings
  options:
    - name: ndots
      value: "1"
# Resource requests and limits
resources:
  enabled: false                # Resource limits and requests are disabled by default
  requests:
    memory: "256Mi"             # Minimum memory requested
    cpu: "250m"                 # Minimum CPU requested
  limits:
    memory: "512Mi"             # Maximum memory allowed
    cpu: "500m"                 # Maximum CPU allowed

# Global networking options
networking:
  ipFamilyPolicy: PreferDualStack  # Can be PreferDualStack, RequireDualStack, or SingleStack
  singleStackIPFamily: IPv4        # Default to IPv4 for single-stack clusters

# Pod-level security context
podSecurityContext:
  enabled: true
  runAsUser: 0
  runAsGroup: 0
  fsGroup: 1000
  fsGroupChangePolicy: OnRootMismatch

# Container-level security context
containerSecurityContext:
  enabled: true
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false

# Config PVC configuration
config:
  enabled: true                 # PVC is enabled by default
  mountPath: /config            # Default mount path for config PVC
  storageSize: "100Mi"

# Shared PVC configuration
data:
  enabled: true                 # Shared PVC is enabled by default
  mountPath: /srv             # Mount path for shared PVC

command:
  - "filebrowser"
args:
  - "-r"
  - "/srv"
  - "-a"
  - "0.0.0.0"
  - "-p"
  - "8080"


# Init container configuration
initContainer:
  enabled: false                # Enable or disable the init container
  name: setup-container         # Name of the init container
  image: busybox                # Docker image to use
  command:                      # Command to run in the init container
    - /bin/sh
    - -c
  args:                         # Arguments for the command
    - "echo Setting up environment"
  env:                          # Environment variables for the init container
    - name: SAMPLE_ENV
      value: "init-container-value"
  volumeMounts:                 # Volume mounts for the init container
    - name: config
      mountPath: /config
    - name: data
      mountPath: /srv

# Comment out section if not needed
volumeMountsExtras:
  - name: config-volume
    mountPath: /settings.json
    subPath: settings.json 

volumesExtras:
  - name: config-volume
    configMap:
      name: filebrowser-config


# Tolerations and Affinity
tolerations: []                   # Define tolerations to schedule pods on tainted nodes
# Example:
# - key: "key1"
#   operator: "Equal"
#   value: "value1"
#   effect: "NoSchedule"

affinity: {}                      # Define node and pod affinity rules
# Example:
# nodeAffinity:
#   requiredDuringSchedulingIgnoredDuringExecution:
#     nodeSelectorTerms:
#       - matchExpressions:
#           - key: "key1"
#             operator: "In"
#             values:
#               - "value1"
# podAffinity:
#   requiredDuringSchedulingIgnoredDuringExecution:
#     - labelSelector:
#         matchLabels:
#           app: "example-app"
#       topologyKey: "kubernetes.io/hostname"
