# General application settings
name: prowlarr
namespace: media

# Docker container settings
image:
  repository: ghcr.io/onedr0p/prowlarr-develop
  tag: 1.29.0.4897@sha256:dbbc3ba87472bd61dd0138f7bc81d7a7f5295995bd6b8ed8ff3bd0187db2faab
  pullPolicy: IfNotPresent

# Timezone
timezone: "America/Los_Angeles"

# Replica settings
replicaCount: 1

# Gateway configuration
gateway:
  enabled: true
  name: gateway-internal
  namespace: network
  domain: sulibot.com

# Environment variables
env:
  - name: PROWLARR__APP__INSTANCENAME
    value: Prowlarr
  - name: PROWLARR__APP__THEME
    value: dark
  - name: PROWLARR__AUTH__METHOD
    value: External
  - name: PROWLARR__AUTH__REQUIRED
    value: DisabledForLocalAddresses
  - name: PROWLARR__LOG__DBENABLED
    value: "False"
  - name: PROWLARR__LOG__LEVEL
    value: info
#  - name: PROWLARR__SERVER__PORT
#    value: "80"
#  - name: PROWLARR__UPDATE__BRANCH
#    value: develop
  - name: PROWLARR__AUTH__APIKEY
    valueFrom:
      secretKeyRef:
        name: prowlarr-secret
        key: PROWLARR__AUTH__APIKEY

# Labels and annotations
labels:
  global: {}
annotations: {}

# Port configuration
ports:
  - name: web-ui
    servicePort: 80
    targetPort: 9696

# DNS configuration
dnsPolicy: ClusterFirst
dnsConfig:
  enabled: true
  options:
    - name: ndots
      value: "1"

# Config PVC settings
config:
  enabled: true
  mountPath: /config
  storageSize: 100Mi

# Data PVC settings
data:
  enabled: true
  mountPath: /data
  storageSize: 10Gi

# Global networking options
networking:
  ipFamilyPolicy: PreferDualStack  # Can be PreferDualStack, RequireDualStack, or SingleStack
  singleStackIPFamily: IPv4        # Default to IPv4 for single-stack clusters

# Pod-level security context
podSecurityContext:
  enabled: true
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  fsGroupChangePolicy: OnRootMismatch

# Container-level security context
containerSecurityContext:
  enabled: true
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false

# Resource limits and requests
resources:
  enabled: false
  requests:
    memory: "256Mi"
    cpu: "250m"
  limits:
    memory: "512Mi"
    cpu: "500m"

# Tolerations and affinity
tolerations: []
affinity: {}

# Headless service configuration
headless:
  enabled: true

# Ingress configuration
ingress:
  enabled: false
  className: cilium
  tls:
    certManagerIssuer: letsencrypt-prod
