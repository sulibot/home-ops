---
# Cilium BGP advertises only Service LoadBalancer VIPs to local FRR
apiVersion: cilium.io/v2alpha1
kind: CiliumBGPAdvertisement
metadata:
  name: cilium-lb-vips
  labels:
    advertise: cilium-lb
spec:
  advertisements:
    - advertisementType: Service
      service:
        addresses:
          - LoadBalancerIP
      selector: {}

---
# MP-BGP Peer Configuration
# Single peer carries both IPv4 and IPv6 routes over IPv6 session
apiVersion: cilium.io/v2alpha1
kind: CiliumBGPPeerConfig
metadata:
  name: frr-local-mpbgp
spec:
  families:
    - afi: ipv4
      safi: unicast
      advertisements:
        matchLabels:
          advertise: cilium-lb
    - afi: ipv6
      safi: unicast
      advertisements:
        matchLabels:
          advertise: cilium-lb

