---
# Enable Istio Ambient Mesh for media namespace (Wave 2)
# This provides L4 mTLS for Immich components via ztunnel
apiVersion: v1
kind: Namespace
metadata:
  name: media
  labels:
    # Enable ambient mesh mode
    istio.io/dataplane-mode: ambient
    # Existing labels preserved
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted
