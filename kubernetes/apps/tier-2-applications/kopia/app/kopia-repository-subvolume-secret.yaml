---
# Secret containing the CephFS subvolume ID for the Kopia repository PVC
# This is used to reclaim the repository PV after cluster rebuilds
#
# IMPORTANT: Update this value if you ever recreate the kopia PVC
# Get the current value with:
#   kubectl get pv $(kubectl get pvc kopia -n default -o jsonpath='{.spec.volumeName}') -o jsonpath='{.spec.csi.volumeHandle}'
apiVersion: v1
kind: Secret
metadata:
  name: kopia-repository-subvolume
  namespace: default
type: Opaque
stringData:
  # CephFS subvolume handle ID
  volumeHandle: "0001-0024-407036f5-1f73-44ff-ba81-1f219b7a8a64-000000000000000b-841e604c-1dd5-4a09-8763-84e672d78c4e"

  # Cluster information (for reference)
  clusterID: "407036f5-1f73-44ff-ba81-1f219b7a8a64"
  fsName: "backups"
  storageClass: "csi-cephfs-backups-sc"
