---
# yaml-language-server: $schema=https://json.schemastore.org/kustomization
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  # Namespaces first â€” ensures default namespace has correct annotations before any tier needs it
  - ./namespaces.yaml
  # CRDs must be first
  - ./gateway-api-crds/ks.yaml
  - ./snapshot-controller-crds/ks.yaml
  # CNI second - cluster won't work without networking
  # helm-repo deploys as its own Kustomization (targetNamespace: flux-system) so the
  # HelmRepository lands in flux-system, not kube-system (cilium ks.yaml targetNamespace)
  - ./cilium/helm-repo/ks.yaml
  - ./cilium/ks.yaml
  # Secrets third - most apps need secrets
  - ./external-secrets/  # Has its own kustomization.yaml
  # Storage fourth - apps need persistent volumes
  - ./ceph-csi/ks.yaml
  - ./snapshot-controller/ks.yaml
