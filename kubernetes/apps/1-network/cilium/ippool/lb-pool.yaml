#---
# LoadBalancer IP Pool for cluster-101
# Dual-stack pool with both IPv4 and IPv6 CIDRs
# IPs from this pool will be assigned to LoadBalancer services
# and advertised via BGP to the upstream router
#
# IP Allocation Strategy for cluster-101:
#   Node subnet:     10.0.101.0/24   (fd00:101::/64)
#   Nodes:           10.0.101.1-63   (fd00:101::1-3f)
#   LoadBalancers:   10.0.101.64-127 (fd00:101:40::/120)
#   Reserved/Future: 10.0.101.128-254

---
# Dual-stack pool for general LoadBalancer services
# Contains both IPv4 and IPv6 blocks for dual-stack support
apiVersion: cilium.io/v2alpha1
kind: CiliumLoadBalancerIPPool
metadata:
  name: cluster-101-pool
  namespace: kube-system
spec:
  blocks:
    # IPv4 blocks
    - cidr: 10.0.101.64/26  # 10.0.101.64-127 (64 IPs)
    - cidr: 10.101.27.0/24  # 10.101.27.0-254 (Gateway and LoadBalancer IPs)
    # IPv6 blocks
    # Expanded to /112 to allow suffix matching with IPv4 (e.g., .120 â†’ ::120)
    - cidr: fd00:101:40::/112  # fd00:101:40::0-ffff (65536 IPs)
    # Gateway API subnet (expanded to /112 for matching suffixes)
    - cidr: fd00:101:1b::/112  # fd00:101:1b::0-ffff (65536 IPs)

---
# Optional: Dedicated pool for ingress controllers
# Uncomment if you want separate pool for ingress with specific IPs
# apiVersion: cilium.io/v2alpha1
# kind: CiliumLoadBalancerIPPool
# metadata:
#   name: cluster-101-ingress-pool-ipv4
#   namespace: kube-system
# spec:
#   blocks:
#     - cidr: 10.0.101.80/29  # 10.0.101.80-87 (8 IPs)
#   serviceSelector:
#     matchLabels:
#       lb-pool: ingress

---
# Optional: Dedicated pool for gateway API
# apiVersion: cilium.io/v2alpha1
# kind: CiliumLoadBalancerIPPool
# metadata:
#   name: cluster-101-gateway-pool-ipv4
#   namespace: kube-system
# spec:
#   blocks:
#     - cidr: 10.0.101.88/29  # 10.0.101.88-95 (8 IPs)
#   serviceSelector:
#     matchLabels:
#       lb-pool: gateway
