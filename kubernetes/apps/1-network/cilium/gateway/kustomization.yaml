resources:
  - externalsecret.yaml
  - cilium-gatewayclassconfig.yaml
  - gatewayclass-cilium.yaml
  - gateway-internal.yaml
  - gateway-external.yaml
  - referencegrant-media.yaml

# Apply bgp-advertise label to Cilium-generated gateway services
# These services are automatically created by Cilium Gateway API controller
# and need the label for BGP advertisement via CiliumBGPAdvertisement
patches:
  - target:
      kind: Service
      namespace: network
      labelSelector: "io.cilium.gateway/owning-gateway"
    patch: |-
      - op: add
        path: /metadata/labels/bgp-advertise
        value: "true"
