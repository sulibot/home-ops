# schematic.yaml for Talos custom image generation
---
customization:
  extraKernelArgs:
    - "i915.enable_guc=3"
    - "intel_iommu=on"
    - "iommu=pt"
    - "module_blacklist=igc"
    # Performance/Security Trade-off Arguments
    - "apparmor=0"
    - "init_on_alloc=0"
    - "init_on_free=0"
    - "mitigations=off"
    - "security=none"
    - "selinux=0" # Corrected from -selinux
    - "sysctl.kernel.kexec_load_disabled=1"
    - "talos.auditd.disabled=1"
  systemExtensions:
    officialExtensions:
      - siderolabs/cloudflared
      - siderolabs/i915
      - siderolabs/intel-ice-firmware
      - siderolabs/intel-ucode
      - siderolabs/mei
      - siderolabs/nfsd
      - siderolabs/nfsrahead
      - siderolabs/qemu-guest-agent
      - siderolabs/realtek-firmware
      - siderolabs/usb-modem-drivers
      - siderolabs/util-linux-tools
      - siderolabs/vmtoolsd-guest-agent
      - siderolabs/zfs