version: 2
ethernets:
  enp6s18:
    dhcp4: false
    dhcp6: false          # <- stop DHCPv6 from stalling
    accept-ra: true       # or false if you donâ€™t need RA
    optional: true
    addresses:
      - ${egress_ipv4_address}/32
      - ${egress_ipv6_address}/128

      routes:
        # == ip route replace 10.0.101.254/32 dev enp6s18
        - to: 10.0.101.254/32
          scope: link

        # == ip -6 route replace fd00:101::fffe/128 dev enp6s18
        - to: fd00:101::fffe/128
          scope: link

        # keep your defaults too (if you want static defaults)
        - to: default
          via: 10.0.101.254
          on-link: true
        - to: default
          via: fd00:101::fffe
    nameservers:
      addresses: [${dns_server_ipv4}, ${dns_server_ipv6}]
      search: [${dns_search}]

  enp6s19:
    dhcp4: false
    dhcp6: false
    optional: true
    addresses:
      - ${mesh_ipv4_address}/32
      - ${mesh_ipv6_address}/128
    link-local: []

  lo:
    optional: true
    addresses:
      - ${egress_ipv4_id}/32
      - ${egress_ipv6_id}/128
    link-local: []
