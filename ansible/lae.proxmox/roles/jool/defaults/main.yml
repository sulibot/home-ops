---
# defaults file for jool

# --- Hostname settings ---
jool_hostname: "jool"
# Optional FQDN; leave empty to skip
jool_fqdn: ""

# --- Jool version & download location ---
jool_version: "4.1.14"
jool_download_url: "https://github.com/NICMx/Jool/releases/download/v{{ jool_version }}"

# NAT64 / DNS64
jool_pool6_prefix: "64:ff9b::/96"

# Example system IP addresses (informational only)
system_ipv4_address: "10.0.200.64"
system_ipv6_address: "fd00:200::64"

# --- DNS64 Configuration (Optional - disabled by default) ---
# DNS64 is handled by RouterOS, not by this VM
dns64_enable: false
dns64_listen_address: "{{ system_ipv6_address }}"
dns64_upstream_dns:
  - "1.1.1.1"
  - "1.0.0.1"
dns64_prefix: "{{ jool_pool6_prefix }}"

# Domains to force NAT64 synthesis (override broken native IPv6)
dns64_force_nat64_domains:
  - quay.io
  - ghcr.io

# --- Secure Boot / DKMS signing ---
# Option 1: Sign modules for Secure Boot (requires MOK enrollment)
# Option 2: Disable Secure Boot via Proxmox (set disable_secure_boot: true)
dkms_sign_modules: false  # Set to true if you want MOK signing workflow
disable_secure_boot: true  # Automatically disable Secure Boot via Proxmox

# Proxmox configuration (for Secure Boot disable via SSH)
proxmox_api_host: "{{ pve_neighbor_v6 | default('fd00:100::1') }}"
proxmox_vm_id: "200064"  # VM ID to modify
proxmox_storage: "local"  # Storage for EFI disk

# DKMS signing (if dkms_sign_modules: true)
dkms_sign_dir: /var/lib/dkms/signing
dkms_mok_key: "{{ dkms_sign_dir }}/MOK.key"
dkms_mok_crt: "{{ dkms_sign_dir }}/MOK.crt"     # PEM
dkms_mok_der: "{{ dkms_sign_dir }}/MOK.der"     # DER for mokutil import
dkms_mok_cn: "MOK for {{ inventory_hostname }}"
# IMPORTANT: Use a temporary password; you will be prompted at the blue MOK screen after reboot.
dkms_mok_password: "ChangeMe-Temporary-MOK-Pass"
